import React, { useState } from 'react';
import { X, Users, Thermometer, Star, ChevronLeft, Search, Heart, User, ChevronDown } from 'lucide-react';

const PhiaDemo = () => {
  const [selectedItem, setSelectedItem] = useState(null);
  const [sortBy, setSortBy] = useState('recommended');
  const [userProfile, setUserProfile] = useState({
    bodyType: 'athletic',
    location: 'New York, NY',
    stylePreference: 'casual-chic'
  });

  const clothingItems = [
    {
      id: 1,
      name: "Everlane Cotton Crew Tee",
      category: "Apparel",
      price: 28,
      originalPrice: 35,
      imageUrl: "https://via.placeholder.com/400x400/E8E8E8/333333?text=Everlane+Tee",
      brand: "Everlane",
      fitProbability: 87,
      comfortScore: 92,
      weatherCompatible: true,
      sizingNote: "True to size",
      friendsOwn: 3,
      friendPrice: { name: "Sarah", savings: 12, platform: "Poshmark" },
      sustainabilityScore: 85,
      hiddenGem: false,
      material: "100% Organic Cotton",
      predictedWear: "3+ years"
    },
    {
      id: 2,
      name: "Levi's 501 Original Jeans",
      category: "Denim",
      price: 68,
      originalPrice: 98,
      imageUrl: "https://via.placeholder.com/400x400/D4D4D4/333333?text=Levi's+Jeans",
      brand: "Levi's",
      fitProbability: 73,
      comfortScore: 88,
      weatherCompatible: true,
      sizingNote: "Runs small - size up",
      friendsOwn: 5,
      friendPrice: { name: "Alex", savings: 25, platform: "Depop" },
      sustainabilityScore: 78,
      hiddenGem: false,
      material: "Denim, Cotton blend",
      predictedWear: "5+ years"
    },
    {
      id: 3,
      name: "Allbirds Wool Runners",
      category: "Footwear",
      price: 95,
      originalPrice: 95,
      imageUrl: "https://via.placeholder.com/400x400/F0F0F0/333333?text=Allbirds+Runners",
      brand: "Allbirds",
      fitProbability: 91,
      comfortScore: 95,
      weatherCompatible: false,
      sizingNote: "Perfect fit for your size history",
      friendsOwn: 7,
      friendPrice: null,
      sustainabilityScore: 92,
      hiddenGem: false,
      material: "Merino Wool",
      predictedWear: "2-3 years"
    },
    {
      id: 4,
      name: "Buck Mason Curved Hem Tee",
      category: "Apparel",
      price: 42,
      originalPrice: 50,
      imageUrl: "https://via.placeholder.com/400x400/E5E5E5/333333?text=Buck+Mason+Tee",
      brand: "Buck Mason",
      fitProbability: 94,
      comfortScore: 89,
      weatherCompatible: true,
      sizingNote: "Fits like your favorite tees",
      friendsOwn: 1,
      friendPrice: null,
      sustainabilityScore: 71,
      hiddenGem: true,
      material: "Pima Cotton",
      predictedWear: "4+ years"
    },
    {
      id: 5,
      name: "Patagonia Nano Puff Jacket",
      category: "Outerwear",
      price: 199,
      originalPrice: 249,
      imageUrl: "https://via.placeholder.com/400x400/D8D8D8/333333?text=Patagonia+Jacket",
      brand: "Patagonia",
      fitProbability: 89,
      comfortScore: 93,
      weatherCompatible: true,
      sizingNote: "True to size",
      friendsOwn: 4,
      friendPrice: { name: "Jordan", savings: 35, platform: "REI Used" },
      sustainabilityScore: 88,
      hiddenGem: false,
      material: "Recycled Polyester",
      predictedWear: "7+ years"
    },
    {
      id: 6,
      name: "Madewell Perfect Vintage Jean",
      category: "Denim",
      price: 128,
      originalPrice: 128,
      imageUrl: "https://via.placeholder.com/400x400/DEDEDE/333333?text=Madewell+Jeans",
      brand: "Madewell",
      fitProbability: 82,
      comfortScore: 87,
      weatherCompatible: true,
      sizingNote: "Runs large",
      friendsOwn: 8,
      friendPrice: null,
      sustainabilityScore: 75,
      hiddenGem: false,
      material: "Cotton Denim",
      predictedWear: "4+ years"
    },
    {
      id: 7,
      name: "Nike Air Max 270",
      category: "Footwear",
      price: 150,
      originalPrice: 150,
      imageUrl: "https://via.placeholder.com/400x400/F5F5F5/333333?text=Nike+Air+Max",
      brand: "Nike",
      fitProbability: 78,
      comfortScore: 91,
      weatherCompatible: true,
      sizingNote: "Size up half size",
      friendsOwn: 6,
      friendPrice: { name: "Taylor", savings: 40, platform: "StockX" },
      sustainabilityScore: 65,
      hiddenGem: false,
      material: "Mesh, Synthetic",
      predictedWear: "2 years"
    },
    {
      id: 8,
      name: "Reformation Linen Dress",
      category: "Dresses",
      price: 178,
      originalPrice: 218,
      imageUrl: "https://via.placeholder.com/400x400/E0E0E0/333333?text=Reformation+Dress",
      brand: "Reformation",
      fitProbability: 85,
      comfortScore: 94,
      weatherCompatible: false,
      sizingNote: "True to size",
      friendsOwn: 2,
      friendPrice: null,
      sustainabilityScore: 91,
      hiddenGem: true,
      material: "Linen",
      predictedWear: "5+ years"
    },
    {
      id: 9,
      name: "Uniqlo Cashmere Sweater",
      category: "Sweaters",
      price: 79,
      originalPrice: 99,
      imageUrl: "https://via.placeholder.com/400x400/EBEBEB/333333?text=Uniqlo+Cashmere",
      brand: "Uniqlo",
      fitProbability: 90,
      comfortScore: 96,
      weatherCompatible: true,
      sizingNote: "Perfect fit",
      friendsOwn: 5,
      friendPrice: { name: "Morgan", savings: 15, platform: "Mercari" },
      sustainabilityScore: 72,
      hiddenGem: true,
      material: "100% Cashmere",
      predictedWear: "6+ years"
    },
    {
      id: 10,
      name: "Vans Old Skool",
      category: "Footwear",
      price: 65,
      originalPrice: 65,
      imageUrl: "https://via.placeholder.com/400x400/D5D5D5/333333?text=Vans+Old+Skool",
      brand: "Vans",
      fitProbability: 93,
      comfortScore: 84,
      weatherCompatible: true,
      sizingNote: "True to size",
      friendsOwn: 9,
      friendPrice: null,
      sustainabilityScore: 68,
      hiddenGem: false,
      material: "Canvas, Rubber",
      predictedWear: "3+ years"
    },
    {
      id: 11,
      name: "COS Wool Coat",
      category: "Outerwear",
      price: 245,
      originalPrice: 299,
      imageUrl: "https://via.placeholder.com/400x400/DBDBDB/333333?text=COS+Wool+Coat",
      brand: "COS",
      fitProbability: 88,
      comfortScore: 90,
      weatherCompatible: true,
      sizingNote: "Runs small",
      friendsOwn: 1,
      friendPrice: { name: "Riley", savings: 70, platform: "Vestiaire" },
      sustainabilityScore: 84,
      hiddenGem: true,
      material: "Virgin Wool",
      predictedWear: "10+ years"
    },
    {
      id: 12,
      name: "Alo Yoga Leggings",
      category: "Activewear",
      price: 98,
      originalPrice: 98,
      imageUrl: "https://via.placeholder.com/400x400/E7E7E7/333333?text=Alo+Yoga+Leggings",
      brand: "Alo Yoga",
      fitProbability: 92,
      comfortScore: 97,
      weatherCompatible: true,
      sizingNote: "True to size",
      friendsOwn: 7,
      friendPrice: null,
      sustainabilityScore: 70,
      hiddenGem: false,
      material: "Nylon, Spandex",
      predictedWear: "3+ years"
    },
    {
      id: 13,
      name: "Zara Linen Shirt",
      category: "Shirts",
      price: 45,
      originalPrice: 60,
      imageUrl: "https://via.placeholder.com/400x400/D0D0D0/333333?text=Zara+Linen+Shirt",
      brand: "Zara",
      fitProbability: 76,
      comfortScore: 88,
      weatherCompatible: false,
      sizingNote: "Runs large",
      friendsOwn: 3,
      friendPrice: { name: "Casey", savings: 10, platform: "ThredUp" },
      sustainabilityScore: 66,
      hiddenGem: false,
      material: "Linen",
      predictedWear: "2 years"
    },
    {
      id: 14,
      name: "Arc'teryx Beta LT Jacket",
      category: "Outerwear",
      price: 425,
      originalPrice: 475,
      imageUrl: "https://via.placeholder.com/400x400/E3E3E3/333333?text=Arc'teryx+Jacket",
      brand: "Arc'teryx",
      fitProbability: 87,
      comfortScore: 95,
      weatherCompatible: true,
      sizingNote: "Athletic fit",
      friendsOwn: 2,
      friendPrice: null,
      sustainabilityScore: 89,
      hiddenGem: false,
      material: "Gore-Tex",
      predictedWear: "15+ years"
    },
    {
      id: 15,
      name: "Ganni Floral Midi Dress",
      category: "Dresses",
      price: 195,
      originalPrice: 265,
      imageUrl: "https://via.placeholder.com/400x400/DADADA/333333?text=Ganni+Dress",
      brand: "Ganni",
      fitProbability: 81,
      comfortScore: 86,
      weatherCompatible: false,
      sizingNote: "Runs small",
      friendsOwn: 4,
      friendPrice: { name: "Avery", savings: 45, platform: "Poshmark" },
      sustainabilityScore: 77,
      hiddenGem: true,
      material: "Organic Cotton",
      predictedWear: "4+ years"
    },
    {
      id: 16,
      name: "Common Projects Achilles Low",
      category: "Footwear",
      price: 385,
      originalPrice: 450,
      imageUrl: "https://via.placeholder.com/400x400/EDEDED/333333?text=Common+Projects",
      brand: "Common Projects",
      fitProbability: 89,
      comfortScore: 82,
      weatherCompatible: true,
      sizingNote: "Size down",
      friendsOwn: 3,
      friendPrice: { name: "Jamie", savings: 95, platform: "Grailed" },
      sustainabilityScore: 81,
      hiddenGem: false,
      material: "Italian Leather",
      predictedWear: "8+ years"
    }
  ];

  const getConfidenceColor = (score) => {
    if (score >= 85) return "text-emerald-700 bg-emerald-50";
    if (score >= 70) return "text-amber-700 bg-amber-50";
    return "text-rose-700 bg-rose-50";
  };

  return (
    <div className="min-h-screen bg-white">
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Playwrite+US+Modern:wght@100..400&display=swap');
        @import url('https://fonts.cdnfonts.com/css/soria');
        
        .heading-font {
          font-family: 'Soria', serif;
        }
        
        .title-font {
          font-family: 'Playwrite US Modern', cursive;
        }
        
        .body-font {
          font-family: 'Roboto', sans-serif;
        }
      `}</style>

      <div className="bg-white">
        <div className="max-w-7xl mx-auto px-8 py-4">
          <div className="flex items-center justify-between mb-6">
            <div className="flex items-center gap-3 bg-gray-100 rounded-full px-4 py-2 w-80">
              <Search className="w-5 h-5 text-gray-400" />
              <input 
                type="text" 
                placeholder="Search items..."
                className="bg-transparent border-none outline-none body-font text-sm w-full"
              />
            </div>
            
            <div className="flex items-center gap-4">
              <button className="p-2 hover:bg-gray-100 rounded-full transition-colors">
                <Heart className="w-6 h-6 text-gray-700" />
              </button>
              <button className="p-2 hover:bg-gray-100 rounded-full transition-colors">
                <User className="w-6 h-6 text-gray-700" />
              </button>
            </div>
          </div>
          
          <h1 className="title-font text-6xl font-bold text-green-600 tracking-tight text-center mb-6">
            Your Digital Fitting Room
          </h1>
          
          <div className="flex justify-center">
            <div className="inline-flex items-center gap-6 bg-white bg-opacity-80 backdrop-blur-md rounded-full px-8 py-4 shadow-lg">
              <div className="text-center">
                <p className="body-font text-sm font-medium text-black capitalize">{userProfile.bodyType}</p>
                <p className="body-font text-xs text-gray-500">Body Type</p>
              </div>
              
              <div className="w-px h-8 bg-gray-300"></div>
              
              <div className="text-center">
                <p className="body-font text-sm font-medium text-black">{userProfile.location}</p>
                <p className="body-font text-xs text-gray-500">Location</p>
              </div>
              
              <div className="w-px h-8 bg-gray-300"></div>
              
              <div className="text-center">
                <p className="body-font text-sm font-medium text-black capitalize">{userProfile.stylePreference}</p>
                <p className="body-font text-xs text-gray-500">Style</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-8 py-8">
        <div className="flex justify-center">
          <div className="w-full max-w-6xl">
            <div className="flex justify-end mb-6">
              <div className="relative">
                <button 
                  className="flex items-center gap-2 bg-white bg-opacity-80 backdrop-blur-md rounded-full px-6 py-3 shadow-lg hover:shadow-xl transition-all border border-gray-200"
                  onClick={() => {}}
                >
                  <span className="body-font text-sm font-medium">Sort by: {sortBy}</span>
                  <ChevronDown className="w-4 h-4" />
                </button>
              </div>
            </div>
            
            <div className="grid grid-cols-4 gap-4">
              {clothingItems.map((item) => (
                <div
                  key={item.id}
                  className="bg-white bg-opacity-90 backdrop-blur-sm rounded-2xl shadow-xl hover:shadow-2xl transition-all cursor-pointer aspect-square flex flex-col overflow-hidden border border-white border-opacity-50"
                  onClick={() => setSelectedItem(item)}
                >
                  <div className="relative w-full h-2/3 bg-gradient-to-br from-gray-50 to-gray-100 overflow-hidden">
                    <img 
                      src={item.imageUrl} 
                      alt={item.name}
                      className="w-full h-full object-cover"
                    />
                    {item.hiddenGem && (
                      <div className="absolute top-2 right-2 bg-black bg-opacity-90 backdrop-blur-sm text-white px-2 py-1 body-font text-xs font-medium rounded-lg shadow-lg">
                        Hidden Gem
                      </div>
                    )}
                  </div>
                  
                  <div className="p-3 flex-1 flex flex-col bg-white">
                    <div className="flex items-baseline gap-1 mb-1">
                      <span className="heading-font text-base font-bold text-black">
                        ${item.price}
                      </span>
                      {item.originalPrice > item.price && (
                        <span className="body-font text-xs text-gray-400 line-through">
                          ${item.originalPrice}
                        </span>
                      )}
                    </div>
                    
                    <h3 className="heading-font text-xs font-semibold text-black mb-1 line-clamp-1">
                      {item.name}
                    </h3>
                    <p className="body-font text-xs text-gray-500 tracking-wide">
                      {item.brand}
                    </p>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>

      {selectedItem && (
        <div className="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-8">
          <div className="bg-white bg-opacity-95 backdrop-blur-lg rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto relative border border-white border-opacity-50">
            <button 
              onClick={() => setSelectedItem(null)}
              className="absolute top-4 right-4 p-2 hover:bg-gray-100 hover:bg-opacity-50 rounded-full z-10 backdrop-blur-sm transition-all"
            >
              <X className="w-6 h-6" />
            </button>

            <div className="p-8">
              <div className="grid grid-cols-2 gap-6 mb-6">
                <div className="space-y-4">
                  <div className="w-full aspect-[3/4] bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl overflow-hidden shadow-lg relative">
                    <div className="absolute inset-0 flex items-center justify-center">
                      <div className="text-center">
                        <div className="mb-4">
                          <div className="w-48 h-64 mx-auto bg-gradient-to-b from-gray-300 to-gray-400 rounded-full relative">
                            <div className="absolute top-0 left-1/2 transform -translate-x-1/2 w-12 h-12 bg-gray-500 rounded-full"></div>
                            <div className="absolute top-16 left-1/2 transform -translate-x-1/2 w-32 h-40 bg-gray-400 rounded-t-full"></div>
                            <div className="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-20 h-24 bg-gray-400"></div>
                            <div className="absolute top-20 left-6 w-8 h-32 bg-gray-400 rounded-full transform -rotate-12"></div>
                            <div className="absolute top-20 right-6 w-8 h-32 bg-gray-400 rounded-full transform rotate-12"></div>
                          </div>
                        </div>
                        <p className="body-font text-sm text-gray-600 font-medium">
                          {userProfile.bodyType.charAt(0).toUpperCase() + userProfile.bodyType.slice(1)} Body Type
                        </p>
                      </div>
                    </div>
                    
                    <div className="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"></div>
                  </div>
                  
                  <div className="bg-blue-50 bg-opacity-60 backdrop-blur-sm rounded-xl p-4 shadow-md border border-blue-100">
                    <p className="body-font text-sm font-semibold text-blue-900 mb-2">Virtual Try-On Preview</p>
                    <p className="body-font text-xs text-blue-700">
                      This simulation shows how the {selectedItem.name} would look on your body type. Fit confidence: {selectedItem.fitProbability}%
                    </p>
                  </div>
                </div>
                
                <div className="flex flex-col">
                  <p className="body-font text-sm text-gray-500 mb-1">{selectedItem.brand}</p>
                  <h2 className="heading-font text-3xl font-bold text-black mb-3">
                    {selectedItem.name}
                  </h2>
                  <div className="flex items-baseline gap-2 mb-4">
                    <span className="heading-font text-3xl font-bold text-black">
                      ${selectedItem.price}
                    </span>
                    {selectedItem.originalPrice > selectedItem.price && (
                      <span className="body-font text-lg text-gray-400 line-through">
                        ${selectedItem.originalPrice}
                      </span>
                    )}
                  </div>
                  {selectedItem.hiddenGem && (
                    <div className="inline-block bg-black text-white px-3 py-1 body-font text-sm font-medium mb-4 self-start">
                      Hidden Gem
                    </div>
                  )}
                </div>
              </div>

              <div className="space-y-4">
                <div className={`p-4 rounded-xl shadow-md ${getConfidenceColor(selectedItem.fitProbability)}`}>
                  <div className="flex items-center justify-between mb-2">
                    <span className="body-font text-sm font-medium">Fit Prediction</span>
                    <span className="heading-font text-xl font-bold">{selectedItem.fitProbability}%</span>
                  </div>
                  <div className="w-full bg-white bg-opacity-50 h-2 mb-2">
                    <div
                      className="bg-current h-2 transition-all"
                      style={{ width: `${selectedItem.fitProbability}%` }}
                    />
                  </div>
                  <p className="body-font text-sm opacity-80">{selectedItem.sizingNote}</p>
                </div>

                <div className="grid grid-cols-2 gap-4">
                  <div className="p-4 bg-white bg-opacity-60 backdrop-blur-sm rounded-xl shadow-md border border-gray-100">
                    <p className="body-font text-xs text-gray-500 mb-1">Comfort Score</p>
                    <p className="heading-font text-xl font-bold">{selectedItem.comfortScore}/100</p>
                  </div>

                  <div className="p-4 bg-white bg-opacity-60 backdrop-blur-sm rounded-xl shadow-md border border-gray-100">
                    <p className="body-font text-xs text-gray-500 mb-1">Weather</p>
                    <p className="body-font text-sm">
                      {selectedItem.weatherCompatible ? 'Compatible' : 'Too warm for season'}
                    </p>
                  </div>

                  <div className="p-4 bg-white bg-opacity-60 backdrop-blur-sm rounded-xl shadow-md border border-gray-100">
                    <p className="body-font text-xs text-gray-500 mb-1">Sustainability</p>
                    <p className="heading-font text-xl font-bold">{selectedItem.sustainabilityScore}/100</p>
                  </div>

                  <div className="p-4 bg-white bg-opacity-60 backdrop-blur-sm rounded-xl shadow-md border border-gray-100">
                    <p className="body-font text-xs text-gray-500 mb-1">Predicted Wear</p>
                    <p className="body-font text-sm font-medium">{selectedItem.predictedWear}</p>
                  </div>
                </div>

                {selectedItem.friendsOwn > 0 && (
                  <div className="p-4 bg-gray-50 bg-opacity-60 backdrop-blur-sm rounded-xl shadow-md border border-gray-100">
                    <p className="body-font text-sm">
                      {selectedItem.friendsOwn} friends with similar style own this
                    </p>
                  </div>
                )}

                {selectedItem.friendPrice && (
                  <div className="p-4 bg-black bg-opacity-90 backdrop-blur-sm text-white rounded-xl shadow-lg">
                    <p className="body-font text-xs tracking-wide mb-1 opacity-70">Friend Intel</p>
                    <p className="body-font text-sm">
                      <strong>{selectedItem.friendPrice.name}</strong> found this ${selectedItem.friendPrice.savings} less on {selectedItem.friendPrice.platform}
                    </p>
                  </div>
                )}

                <div className="p-4 bg-white bg-opacity-60 backdrop-blur-sm rounded-xl shadow-md border border-gray-100">
                  <p className="body-font text-xs text-gray-500 mb-1">Material</p>
                  <p className="body-font text-sm">{selectedItem.material}</p>
                </div>

                <button className="w-full bg-black hover:bg-gray-800 text-white body-font font-medium py-4 text-sm tracking-wider transition-all rounded-xl shadow-lg">
                  Add to Cart
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default PhiaDemo;
